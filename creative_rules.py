# -*- coding: utf-8 -*-

import random

# ==========================================================
# අපේ ඇප් එකේ කලාකරුවා (නිර්මාණශීලී රීති පද්ධතිය)
# ==========================================================

creative_dictionary = {
    # --- ඔබගේ ප්‍රතිචාරය මත පදනම්ව දියුණු කළ රීති ---
    "මට ඔබව මගහරවා ගන්නෙමි.": ["මට ඔයාව නැතුව පාළු හිතෙයි.", "මට ඔයාව මතක් වෙනවා."],
    "අපි මෙතනින් යමු.": ["යමු මෙහෙන්.", "මෙතනින් යමු."],
    "ඔබ ඔබේ මනසින් බැහැරද?": ["ඔයාට සිහියක් නැද්ද?", "ඔයාට පිස්සුද?"],
    "ඒ ගැන මට කියන්න.": ["අහන්නත් දෙයක්ද.", "ඒක තමයි මම මේ කියන්නෙත්."],
    "ඔබ බරපතලද?": ["ඇත්තමද කියන්නෙ?", "විකාරද?"],
    "එන්න!": ["හේයි, එන්නකෝ!", "නිකන් ඉන්නවකො!"],
    "ඔබ ප්‍රාර්ථනා කරනවා!": ["හීනෙන් තමයි!", "හිතාගෙන ඉන්න.", "වෙන්නැති!"],
    "මට විවේකයක් දෙන්න!": ["විකාර කතා කරන්න එපා!", "අනේ නිකන් ඉන්නවකො!", "මට පොඩ්ඩක් ඉන්න දෙන්නකෝ.", "මට පාඩුවේ ඉන්න දෙන්නකෝ."],
    "ඔබට අවශ්ය කුමක්ද?": ["මොකද ඕනෙ?", "ඔයාට මොනවද ඕනෙ?", "මොකක්ද වෙන්න ඕන?"],
    "එසේ ද?": ["එහෙමද?", "ඇත්තද?", "ඒකත් එහෙමද?"],
    "කමක් නැහැ.": ["ඕක අමතක කරලා දාන්න.", "ඒක මොකටද.", "ගනන් ගන්න එපා."],
    "ඉතින් කුමක් ද?": ["ඉතින් මොකෝ?", "මට මොකෝ?", "ඒකෙන් මොකද වෙන්නෙ?"],
    "මට විශ්වාස නෑ.": ["මට නම් විශ්වාස නෑ.", "හරියටම කියන්න බෑ.", "සැකයි වගේ."],

    # --- පැරණි, තහවුරු කළ රීති ---
    "කිසිම വഴියක් නැහැ!": ["අපෝ බෑ!", "වෙන්න බෑ!", "පිස්සුද!"],
    "මම එසේ අනුමාන කරමි.": ["වෙන්න ඇති.", "එහෙම තමයි පේන්නෙ.", "මම හිතන්නෙත් එහෙමයි."],
    "ඒක මගේ වරදක්.": ["වැරැද්ද මගේ.", "සමාවෙන්න, ඒක මගේ අතින් වුණේ.", "ඒකට වගකියන්න ඕන මමයි."],
    "හරි.": ["හරි හරි.", "හරි.", "හරි එහෙනම්."],
}

def apply_creative_rules(text):
    stripped_text = text.strip()
    if stripped_text in creative_dictionary:
        options = creative_dictionary[stripped_text]
        if isinstance(options, list):
            return random.choice(options)
        else:
            return options
            
    for bad_phrase, good_phrases in creative_dictionary.items():
        if bad_phrase in text:
            if isinstance(good_phrases, list):
                chosen_phrase = random.choice(good_phrases)
                return text.replace(bad_phrase, chosen_phrase)
            else:
                return text.replace(bad_phrase, good_phrases)
    
    return text
